<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.3">
    <title>Nusantara Smart Agriculture Integration System</title>
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.css" rel="stylesheet" />
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="irigasi.js"></script>
</head>
<body>
    <header>
        <div class="logo-flash-container">
            <img src="20250530_051954.png" class="logo" alt="Logo" />
        </div>
        <h1>🌾 Nusantara Smart Agriculture Integration System 🌾</h1>
    </header>
    <nav>
        <button onclick="showSection('beranda')">🏠 Beranda</button>
        <button onclick="showSection('pemetaan')">📍 Pemetaan & Topografi</button>
        <button onclick="showSection('cuaca')">🌦️ Pemantauan Cuaca & Iklim</button>
        <button onclick="showSection('irigasi')">💧 Otomatisasi Irigasi</button>
        <button onclick="showSection('bibit')">🌱 Pendataan Bibit & Pemantauan</button>
    </nav>
    <main>
        <section id="beranda" class="section-bg">
  <h2>Selamat Datang di Nusantara Smart Agriculture Integration System</h2>
            <b>Aplikasi Demo ini dibuat oleh FADHEL AJA</b><br>

  <div class="opsi-auth-beranda">
    <button class="auth-btn" onclick="showAuthForm('login')">Login Operator</button>
    <button class="auth-btn" onclick="showAuthForm('registrasi')">Registrasi Operator</button>
  </div>

  <!-- Modal Login -->
  <div id="modal-login" class="modal-auth">
    <div class="modal-content">
      <span class="close-modal" onclick="closeAuthForm('login')">&times;</span>
      <h3>Login Operator</h3>
      <form id="form-login">
        <label>ID Operator:<br>
          <input name="kode_operator" required>
        </label><br>
        <label>Password:<br>
          <input name="password" type="password" required>
        </label><br>
        <label>Validasi 3 Angka Nomor Kontak:<br>
          <span id="login-validasi-info"></span>
          <input name="validasi" maxlength="3" required>
        </label><br>
        <button type="submit">Login</button>
      </form>
      <div id="notif-login"></div>
      <div style="margin-top:1rem;">
        <button type="button" class="small-btn" onclick="showAuthForm('lupa')">Lupa Password?</button>
      </div>
    </div>
  </div>

  <!-- Modal Lupa Password -->
  <div id="modal-lupa" class="modal-auth">
    <div class="modal-content">
      <span class="close-modal" onclick="closeAuthForm('lupa')">&times;</span>
      <h3>Lupa Password?</h3>
      <form id="form-lupa-password">
        <label>Email:<br>
          <input name="email" type="email" required>
        </label><br>
        <label>Validasi 3 Angka Nomor Kontak:<br>
          <span id="lupa-validasi-info"></span>
          <input name="validasi" maxlength="3" required>
        </label><br>
        <button type="submit">Kirim Link Reset</button>
      </form>
      <div id="notif-lupa"></div>
    </div>
  </div>

  <!-- Modal Registrasi -->
  <div id="modal-registrasi" class="modal-auth">
    <div class="modal-content">
      <span class="close-modal" onclick="closeAuthForm('registrasi')">&times;</span>
      <h3>Registrasi Operator</h3>
      <form id="form-registrasi">
        <label>ID Operator:<br>
          <input name="kode_operator" id="kode_operator" readonly style="background:#f7f7f7">
          <button type="button" id="btn-generate-kode">Generate</button>
        </label><br>
        <label>Nama Lengkap:<br>
          <input name="nama" required>
        </label><br>
        <label>No. KTP:<br>
          <input name="ktp" required maxlength="16">
        </label><br>
        <label>No. Kontak:<br>
          <input name="kontak" id="reg_kontak" required maxlength="15">
        </label><br>
        <label>Email:<br>
          <input name="email" type="email" required>
        </label><br>
        <label>Password:<br>
          <input name="password" type="password" required>
        </label><br>
        <label>Konfirmasi Password:<br>
          <input name="konfirmasi" type="password" required>
        </label><br>
        <button type="submit">Registrasi</button>
      </form>
      <div id="notif-registrasi"></div>
    </div>
  </div>

  <hr>
  <p>
      Aplikasi ini membantu Anda memantau, mengelola, dan mengoptimalkan perkebunan secara digital.<br>
      <b>Tutorial Penggunaan:</b><br>
      1. Pilih menu di atas untuk berpindah fitur.<br>
      2. Menu <b>Pemetaan & Topografi</b> untuk melihat dan menambah data perkebunan di peta.<br>
      3. Menu <b>Pemantauan Cuaca</b> untuk mengecek prakiraan cuaca lokasi.<br>
      4. Menu <b>Otomatisasi Irigasi</b> untuk mengatur jadwal dan sistem irigasi.<br>
      5. Menu <b>Pendataan Bibit</b> untuk pencatatan bibit dan pemantauan bibit.
  </p>
  <p>
      Silakan pilih menu fitur pada navigasi untuk memulai.
  </p>
</section>

        <section id="pemetaan" class="hidden section-bg">
            <h2>🗺️ Pemetaan & Topografi</h2>
            <form id="form-cari-lokasi" style="margin-bottom:1rem;">
                <label>Koordinat Lokasi (latitude, longitude):
                    <input type="text" id="input-koordinat" placeholder="-7.8014, 110.3671" required>
                </label>
                <button type="submit">Cari Lokasi</button>
            </form>
            <div id="map" style="width:100%; height:400px; border-radius:12px; margin-bottom:1.5rem;"></div>
            <div id="keterangan-lokasi" style="background:#f4fff4; padding:1rem; border-radius:9px; box-shadow:0 2px 8px #43a04715;"></div>
            <form id="form-tambah-lokasi" style="display:none; margin-top:1rem; background:#f6fff6; padding:1.2rem; border-radius:9px; box-shadow:0 2px 8px #43a04715;">
                <h3>Tambah Data Perkebunan Baru</h3>
                <div style="display:flex;flex-wrap:wrap;gap:1rem;">
                  <div>
                    <label>Lokasi Perkebunan:<br>
                      <input name="lokasi" required>
                    </label><br>
                    <label>Luas Perkebunan:<br>
                      <input name="luas" required>
                    </label><br>
                    <label>Jumlah Blok Perkebunan:<br>
                      <input name="blok" type="number" required>
                    </label><br>
                    <label>Jenis Perkebunan:<br>
                      <input name="jenis" required>
                    </label><br>
                    <label>Penanggung Jawab:<br>
                      <input name="penanggungJawab" required>
                    </label><br>
                    <label>Tenaga Ahli Pendamping:<br>
                      <input name="ahli" required>
                    </label><br>
                    <label>Jumlah Karyawan:<br>
                      <input name="karyawan" type="number" required>
                    </label><br>
                  </div>
                  <div>
                    <label>Waktu Awal Tanam:<br>
                      <input name="waktuTanam" type="date" required>
                    </label><br>
                    <label>Waktu Panen:<br>
                      <input name="waktuPanen" type="date" required>
                    </label><br>
                    <label>Kode Bibit yang Ditanam:<br>
                      <input name="kodeBibit" required>
                    </label><br>
                    <label>Jumlah Bibit yang Ditanam:<br>
                      <input name="jumlahBibit" type="number" required>
                    </label><br>
                    <label>Kode Pupuk:<br>
                      <input name="kodePupuk" required>
                    </label><br>
                    <label>Merek Pupuk:<br>
                      <input name="merekPupuk" required>
                    </label><br>
                    <label>Jumlah Kebutuhan Pupuk Hingga Panen:<br>
                      <input name="kebutuhanPupuk" required>
                    </label><br>
                  </div>
                </div>
                <input type="hidden" name="lat">
                <input type="hidden" name="lng">
                <button type="submit">Simpan Data</button>
            </form>
            <div id="notif-tambah"></div>
        </section>

        <section id="cuaca" class="hidden section-bg">
            <h2>🌦️ Pemantauan Cuaca & Iklim</h2>
            <input type="text" id="city" placeholder="Ketik nama kota...">
            <button onclick="fetchCuaca()">Cek Cuaca</button>
            <div id="cuacaHasil"></div>
        </section>

        <section id="irigasi" class="hidden section-bg">
            <h2>💧 Otomatisasi Irigasi</h2>
            <form id="irigasi-form">
                <div class="form-row">
                    <label>Kode Lokasi Pertanian:<br>
                        <input type="text" name="kode_lokasi" required>
                    </label>
                    <label>Nomor Blok Lokasi:<br>
                        <input type="number" name="nomor_blok" required>
                    </label>
                    <label>Nomor Pintu Irigasi:<br>
                        <input type="number" name="nomor_pintu" required>
                    </label>
                </div>
                <div class="form-row">
                    <label>Hari Pengairan:<br>
                        <select name="hari" required>
                            <option value="Senin">Senin</option>
                            <option value="Selasa">Selasa</option>
                            <option value="Rabu">Rabu</option>
                            <option value="Kamis">Kamis</option>
                            <option value="Jumat">Jumat</option>
                            <option value="Sabtu">Sabtu</option>
                            <option value="Minggu">Minggu</option>
                        </select>
                    </label>
                    <label>Jam Mulai:<br>
                        <input type="time" name="jam_mulai" required>
                    </label>
                    <label>Jam Selesai:<br>
                        <input type="time" name="jam_selesai" required>
                    </label>
                    <label>Debit Air/Periode (liter):<br>
                        <input type="number" name="debit_air" required>
                    </label>
                </div>
                <button type="submit">Simpan & Set Otomatisasi</button>
            </form>
            <div id="irigasi-info"></div>
            <div id="irigasi-warning"></div>
            <canvas id="debitChart" height="200"></canvas>
        </section>

        <section id="bibit" class="hidden section-bg">
            <h2>🌱 Pendataan Bibit & Pemantauan</h2>
            <form id="bibit-form">
                <div style="display:flex;flex-wrap:wrap;gap:1.5rem;">
                    <div>
                        <label>Kode Bibit:<br>
                            <input type="text" name="kode_bibit" required>
                        </label><br>
                        <label>Merek Bibit:<br>
                            <input type="text" name="merek_bibit" required>
                        </label><br>
                        <label>Nama Distributor:<br>
                            <input type="text" name="distributor" required>
                        </label><br>
                        <label>Jumlah Bibit:<br>
                            <input type="number" name="jumlah_bibit" required>
                        </label><br>
                        <label>Lokasi Perkebunan:<br>
                            <input type="text" name="lokasi_perkebunan" required>
                        </label><br>
                        <label>Waktu Tanam:<br>
                            <input type="date" name="waktu_tanam" required>
                        </label><br>
                        <label>Waktu Panen:<br>
                            <input type="date" name="waktu_panen" required>
                        </label><br>
                        <label>Jumlah Takaran Pupuk per Bibit:<br>
                            <input type="text" name="takaran_pupuk" required>
                        </label><br>
                        <label>Nutrisi Tambahan Lain:<br>
                            <input type="text" name="nutrisi_tambahan">
                        </label><br>
                        <label>Siklus Pemupukan:<br>
                            <input type="text" name="siklus_pemupukan" required>
                        </label><br>
                    </div>
                    <div>
                        <label>Keterangan Pemantauan Mingguan (boleh kosong jika belum ada):<br>
                            <textarea name="keterangan_pemantauan" rows="7" placeholder="Minggu 1: ...&#10;Minggu 2: ...&#10;dst."></textarea>
                        </label><br>
                        <label>Kendala Dihadapi:<br>
                            <input type="text" name="kendala" >
                        </label><br>
                        <label>Solusi Penanganan:<br>
                            <input type="text" name="solusi" >
                        </label><br>
                        <label>Metode Penanganan:<br>
                            <input type="text" name="metode" >
                        </label><br>
                        <label>Tenaga Ahli:<br>
                            <input type="text" name="tenaga_ahli" >
                        </label><br>
                        <label>Penanggung Jawab Kebun:<br>
                            <input type="text" name="penanggung_jawab" >
                        </label><br>
                    </div>
                </div>
                <button type="submit">Simpan Data Bibit & Pemantauan</button>
            </form>
            <div id="hasil-bibit" style="margin-top:1.5rem;"></div>
            <div id="daftar-bibit" style="margin-top:2rem;"></div>
        </section>
    </main>
    <footer>
        <p>&copy; 2025 Nusantara Smart Agriculture Integration System</p>
    </footer>
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.js"></script>
    <script src="script.js"></script>
</body>
</html>
